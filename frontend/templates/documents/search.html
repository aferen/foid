{% extends 'base.html' %}

{% block title %} | Tez dosyası yükleme {% endblock %}

{% block content %}
<br>
      {% include "partials/_alerts.html"%}
<div class="d-flex justify-content-center">
    <div class="col-md-10">
        <form enctype="multipart/form-data" method="POST" action="">
            {% csrf_token %}
            <div class="form-row">
                <div class="col-md-9 mb-3">
                    <input type="text" class="form-control" id="query" placeholder="Aranılacak Nesneyi Giriniz" name="query">
                </div>
                <div class="col-md-2 mb-3 mt-lg-2">
                    <div class="form-row">
                        <div class="custom-control custom-switch">
                            <input type="checkbox" id="advanceSearch" class="custom-control-input"/>
                            <label class="custom-control-label" for="advanceSearch" style="font-weight: normal;">Gelişmiş Arama</label>
                            <a id="advanceSearchInfo" style="cursor: pointer;" class="text-primary"><i class="fas fa-info-circle"></i></a>
                    </div>
                      
                    </div>
                </div>
                
                <div class="col-md-1 mb-3">
                    <button type="submit" id="submitSearch" style="float: right;" class="btn btn-success btn-block"><i class="fas fa-search"></i> Ara</button>
                </div>
            </div>  
            <div id="advanceSearchModal" style="display:none" class="alert alert-dark col-md-12" role="alert">
                <h4 class="alert-heading">Well done!</h4>
                <p>Aww yeah, you successfully read this important alert message. This example text is going to run a bit longer so that you can see how spacing within an alert works with this kind of content.</p>
                <hr>
                <p class="mb-0">Whenever you need to, be sure to use margin utilities to keep things nice and tidy.</p>
            </div>
        </form>
        <div style="display: none;" id="uploaded_files">
            <input type="file" class="custom-file-input" lang="tr" id="fileupload" style="display: none;">

            <div class="file-icon">
                <i class="far fa-file-alt"></i>
            </div>
            <div class="file-details">
                <p style="display: inline-block;" class="filename"></p>
                <button title="Kaldır" type="button" id="removeFile" class="close">
                    <span>&times;</span>
                </button>
                <small style="display: block" class="textbox"></small>
                <div id="progressBar" class="progress" style="margin: 2px; display:none;">
                    <div class="progress-bar progress-bar-striped bg-success" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" style="width: 0%">
                    </div>
                </div>
            </div>
        </div>
        <div style="display: none!important; margin-top: 5px;" id="spinner" class="d-flex align-items-center ">
            <span style="display: inline-block; margin-right: 5px;">İşleniyor</span>
            <div  class="spinner-border text-success" role="status" aria-hidden="true"></div>
        </div>
        <label id="dropBox" for="fileupload">Gözat veya Sürükle & Bırak</label>
        <input style="display: none;" type="file" id="fileupload" />
        <div id="resultViewer"></div>

    </div>
</div>

<script>
    $(".custom-file-input").on("change", function() {
      var fileName = $(this).val().split("\\").pop();
      $(this).siblings(".custom-file-label").addClass("selected").html(fileName);
    });
    $('#advanceSearch').click(function() {  
        if (this.checked) {
            $("#query").attr("placeholder", "Sorgu Cümlesi Giriniz");
        } else {
            $("#query").attr("placeholder", "Aranılacak Nesneyi Giriniz");
        }
    }); 
    $('#advanceSearchInfo').click(function() {  
        if ($('#advanceSearchModal').css('display') == 'none') {
            $("#advanceSearchModal").slideDown(500, function(){
                 $("#advanceSearchModal").slideDown(500);
             });
        } else {
            $("#advanceSearchModal").fadeTo(0, 600).slideUp(500, function(){
                $("#advanceSearchModal").slideUp(500);
            });
        }
    }); 
</script>

{% endblock %}
