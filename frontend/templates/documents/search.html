{% extends 'base.html' %}

{% block title %} {% endblock %}

{% block content %}
<br>
      {% include "partials/_alerts.html"%}
<div class="d-flex justify-content-center">
    <div class="col-md-10">
        <form enctype="multipart/form-data" method="POST" action="">
            {% csrf_token %}
            <div class="form-row">
                <div class="col-md-8 mb-3">
                    <input type="text" class="form-control" id="query" placeholder="Aranılacak Nesneyi Giriniz" name="query">
                </div>
                <div class="col-md-2 mb-3 mt-lg-2">
                    <div class="form-row">
                        <div class="custom-control custom-switch">
                            <input type="checkbox" id="advancedSearch" class="custom-control-input"/>
                            <label class="custom-control-label" for="advancedSearch" style="font-weight: normal;">Gelişmiş Arama</label>
                            <a id="advancedSearchInfo" style="cursor: pointer;" class="text-primary"><i class="fas fa-info-circle"></i></a>
                    </div>
                      
                    </div>
                </div>
                 
                <div class="col-md-1 mb-3">
                    <button type="submit" id="submitSearch" style="float: right;" class="btn btn-success btn-block"><i class="fas fa-search"></i> Ara</button>
                </div>
                <div class="col-md-1 mb-3">
                    <button type="button" id="resetSearch" class="btn btn-dark"><i class="fas fa-broom"></i></button>
                </div>
            </div>  
            <div id="advancedSearchModal" style="display:none" class="alert alert-dark col-md-12" role="alert">
                <h4 class="alert-heading">Well done!</h4>
                <p>Aww yeah, you successfully read this important alert message. This example text is going to run a bit longer so that you can see how spacing within an alert works with this kind of content.</p>
                <hr>
                <p class="mb-0">Whenever you need to, be sure to use margin utilities to keep things nice and tidy.</p>
            </div>
        </form>
        <div class="form-row">
            <div class="col-md-4" style="display: none;" id="uploaded_files">
                <input type="file" class="custom-file-input" lang="tr" id="fileupload" style="display: none;">

                <div class="file-icon">
                    <i class="far fa-file-alt"></i>
                </div>
                <div class="file-details">
                    <p style="display: inline-block;" class="filename">{{document.name}}</p>
                    <button title="Kaldır" type="button" id="removeFile" class="close">
                        <span>&times;</span>
                    </button>
                    <small style="display: block" id="statusMessage"></small>
                  
                </div>
            </div>
    
            <div class="form-row col-md-4 d-flex justify-content-center align-items-center">
                <div id="pageController" style="display: none;" class="col-xs-2">
                    <div class="input-group">
                        <div class="input-group-prepend">
                            <button id="pageControllerPrevious" class="btn btn-info" type="button"><i class="fas fa-arrow-left"></i></button>
                        </div>
                        <input id="pageNumber" style="width: 60px; text-align: center;" type="text" class="form-control">
                        <div class="input-group-append">
                            <span id="resultTotalPage" class="input-group-text"></span>
                            <button id="pageControllerNext" class="btn btn-info" type="button"><i class="fas fa-arrow-right"></i></button>
                        </div>
                    </div>
                </div>
            </div>   
            <div class="col-md-4">
                {% if document.id %}
                    <a title="Geri" class="btn btn-dark ml-1 btn-sm float-right text-white" href="javascript:history.back()"><i class="fas fa-chevron-left"></i></a>
                    <a title="Dokümanı Göster" class="btn btn-secondary ml-1 btn-sm float-right" href="http://localhost:8080/document/{{document.docID.hex}}" target="_blank"><i class="fas fa-file-pdf"></i></a>
                    <a title="Arama Detayları" class="btn btn-sm btn-info float-right" href="{% url 'documents_detail' document.id %}"><i class="fas fa-info-circle"></i></a>
                {% endif %}	
            </div>
        </div>
        <div id="progressBar" class="progress" style="margin: 0px 32px; display:none;">
            <div id="progressBarElement" class="progress-bar progress-bar-striped bg-success" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" style="width: 0%"></div>
        </div>
        <label id="dropBox" style="display: none;" for="fileupload">Gözat veya Sürükle & Bırak</label>
        <input style="display: none;" type="file" id="fileupload" />
        <div id="resultViewer"></div>
        <span id="docID" style="display: none;">{{ document.docID.hex }}</span>
        <span id="newSearch" style="display: none;">{{ newSearch }}</span>
        <span id="user" style="display: none;">{{ user }}</span>

        <span id="resultPageList" style="display: none;"></span>
    </div>
</div>

<script>
    $(".custom-file-input").on("change", function() {
      var fileName = $(this).val().split("\\").pop();
      $(this).siblings(".custom-file-label").addClass("selected").html(fileName);
    });
    $('#advancedSearch').click(function() {  
        if (this.checked) {
            $("#query").attr("placeholder", "Sorgu Cümlesi Giriniz");
        } else {
            $("#query").attr("placeholder", "Aranılacak Nesneyi Giriniz");
        }
    }); 
    $('#advancedSearchInfo').click(function() {  
        if ($('#advancedSearchModal').css('display') == 'none') {
            $("#advancedSearchModal").slideDown(500, function(){
                 $("#advancedSearchModal").slideDown(500);
             });
        } else {
            $("#advancedSearchModal").fadeTo(0, 600).slideUp(500, function(){
                $("#advancedSearchModal").slideUp(500);
            });
        }
    }); 
</script>

{% endblock %}
